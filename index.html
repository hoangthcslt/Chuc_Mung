<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>L·ªùi Nh·∫Øn ƒê·∫∑c Bi·ªát!</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
    
    <style>
        /* === C·∫§U H√åNH C∆† B·∫¢N === */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background-color: #ffdde1;
            overflow: hidden;
            font-family: 'Pacifico', cursive;
            width: 100vw;
            height: 100vh;
        }

        /* === XOAY M√ÄN H√åNH TR√äN ƒêI·ªÜN THO·∫†I (MOBILE ROTATION) === */
        /* Logic: N·∫øu m√†n h√¨nh d·ªçc (Portrait), xoay to√†n b·ªô n·ªôi dung ch√≠nh 90 ƒë·ªô */
        @media screen and (orientation: portrait) and (max-width: 900px) {
            #main-wrapper {
                width: 100vh; /* Chi·ªÅu r·ªông b·∫±ng chi·ªÅu cao m√†n h√¨nh */
                height: 100vw; /* Chi·ªÅu cao b·∫±ng chi·ªÅu r·ªông m√†n h√¨nh */
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%) rotate(90deg); /* Xoay ngang */
                overflow: hidden;
            }
            /* ƒêi·ªÅu ch·ªânh k√≠ch th∆∞·ªõc ch·ªØ m·ªôt ch√∫t khi xoay ƒë·ªÉ d·ªÖ ƒë·ªçc */
            .message-box p { font-size: clamp(1.8em, 5vh, 3em) !important; }
        }
        @media screen and (orientation: landscape) {
            #main-wrapper {
                width: 100%; height: 100%;
                position: relative;
            }
        }

        /* === M√ÄN H√åNH CH·ªú & N√öT B·∫§M === */
        #start-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: #ffdde1;
            z-index: 100;
            display: flex; justify-content: center; align-items: center; flex-direction: column;
            transition: opacity 0.5s ease;
        }
        
        /* Hi·ªáu ·ª©ng n√∫t b·∫•m rung rinh */
        @keyframes heartbeat {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        #start-button {
            padding: 15px 40px;
            font-family: 'Pacifico', cursive;
            font-size: 1.8em;
            color: white;
            background: linear-gradient(45deg, #ff69b4, #ff8da1);
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 10px 25px rgba(255, 105, 180, 0.4);
            animation: heartbeat 1.5s infinite;
        }

        /* === M√ÄN H√åNH ƒê·∫æM NG∆Ø·ª¢C === */
        #countdown-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: #ffdde1; /* N·ªÅn h·ªìng */
            z-index: 99; /* D∆∞·ªõi n√∫t start m·ªôt ch√∫t */
            display: none; /* ·∫®n m·∫∑c ƒë·ªãnh */
            justify-content: center; align-items: center;
            flex-direction: column;
        }
        #countdown-number {
            font-size: 8em;
            color: #ff69b4;
            text-shadow: 2px 2px 10px rgba(255, 255, 255, 0.8);
            animation: countPulse 1s infinite;
        }
        @keyframes countPulse {
            0% { transform: scale(0.5); opacity: 0; }
            50% { transform: scale(1.2); opacity: 1; }
            100% { transform: scale(1); opacity: 0; }
        }

        /* === MATRIX & N·ªòI DUNG CH√çNH === */
        #matrix-canvas {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 1;
            transition: opacity 1.5s ease-out;
        }

        .content-container {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; justify-content: center; align-items: center;
            z-index: 2;
            padding: 20px;
            pointer-events: none; /* ƒê·ªÉ click xuy√™n qua n·∫øu c·∫ßn */
        }

        .message-box {
            width: 100%;
            text-align: center;
            color: white;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.8), 0 0 20px #ff0055;
        }

        .message-box p {
            font-size: clamp(2.2em, 6vw, 3.5em);
            margin-bottom: 20px;
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 1s ease-out, transform 1s cubic-bezier(0.175, 0.885, 0.32, 1.275); /* Hi·ªáu ·ª©ng n·∫£y nh·∫π */
            display: none; /* ·∫®n ho√†n to√†n ƒë·ªÉ kh√¥ng chi·∫øm ch·ªó */
        }
        .message-box p.visible {
            display: block; /* Hi·ªán l·∫°i */
            animation: fadeInMove 1s forwards; 
        }
        @keyframes fadeInMove {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-out { opacity: 0 !important; transition: opacity 2s; }

        /* === HI·ªÜU ·ª®NG HOA & ·∫¢NH TR√ÅI TIM === */
        #flower-container {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 3;
            pointer-events: none;
            overflow: hidden;
        }

        /* Class chung cho v·∫≠t th·ªÉ bay (hoa + ·∫£nh) */
        .floating-item {
            position: absolute;
            bottom: -100px;
            opacity: 0;
            animation-name: floatUp;
            animation-timing-function: linear;
            animation-fill-mode: forwards;
        }

        /* Style ri√™ng cho Hoa */
        .flower-item {
            font-size: 2.5em;
            filter: drop-shadow(0 0 5px rgba(255,255,255,0.5));
        }

        /* Style ri√™ng cho ·∫¢nh Tr√°i Tim */
        .heart-image-item {
            width: 80px;
            height: 80px;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            /* T·∫°o h√¨nh tr√°i tim b·∫±ng mask-image (c√°ch hi·ªán ƒë·∫°i nh·∫•t) */
            mask-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z'/></svg>");
            -webkit-mask-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z'/></svg>");
            mask-repeat: no-repeat;
            mask-position: center;
            mask-size: contain;
            
            /* Vi·ªÅn ph√°t s√°ng cho tr√°i tim */
            filter: drop-shadow(0 0 8px rgba(255, 20, 147, 0.8)); 
            box-shadow: inset 0 0 20px rgba(255,192,203,0.5); 
        }

        @keyframes floatUp {
            0% { transform: translateY(0) translateX(0) rotate(0deg) scale(0.5); opacity: 0; }
            10% { opacity: 1; transform: scale(1); }
            50% { transform: translateY(-40vh) translateX(20px) rotate(180deg); }
            100% { transform: translateY(-110vh) translateX(-20px) rotate(360deg) scale(1.2); opacity: 0; }
        }

        /* === L·ªúI CH√öC CU·ªêI === */
        #final-message-container {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; justify-content: center; align-items: center;
            z-index: 4;
            opacity: 0;
            transition: opacity 2s ease-in;
            pointer-events: none;
        }
        #final-message h1 {
            font-size: clamp(3em, 9vw, 5em);
            color: #fff;
            text-shadow: 0 0 15px #ff1493, 0 0 30px #ff1493, 0 0 50px #fff;
            text-align: center;
            animation: pulseFinal 2s infinite ease-in-out;
        }
        @keyframes pulseFinal {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
    </style>
</head>

<body>

    <!-- Wrapper ch√≠nh ƒë·ªÉ x·ª≠ l√Ω xoay m√†n h√¨nh tr√™n mobile -->
    <div id="main-wrapper">

        <!-- M√†n h√¨nh ch·ªù -->
        <div id="start-screen">
            <button id="start-button"> Nh·∫•n v√†o ƒë√¢y nh√©!</button>
        </div>

        <!-- M√†n h√¨nh ƒë·∫øm ng∆∞·ª£c -->
        <div id="countdown-screen">
            <div id="countdown-number">5</div>
            <p style="font-size: 1.5em; color: #ff69b4; margin-top: 20px;">Ch·ªù x√≠u nha...</p>
        </div>

        <audio id="background-music" loop preload="auto">
            <source src="nhac-nen.mp3" type="audio/mpeg"> 
        </audio>

        <canvas id="matrix-canvas"></canvas>

        <div class="content-container">
            <div class="message-box">
                <p>G·ª≠i ƒë·∫øn: Hoa Linh üå∑</p>
                <p>25/11/2025
                <p>H√¥m nay l√† ng√†y ƒë·∫∑c bi·ªát c·ªßa bn... üéâ<p>
                <p>Ch√∫c bn m·ªôt ng√†y sinh nh·∫≠t vui v·∫ª ü©∑</p>
                <p>..V·∫≠y l√† c≈©ng ƒë√£ gia nh·∫≠p h·ªôi U30 r√≤i üíÜ‚Äç‚ôÇÔ∏è kkk..</p>
                <p>Ch√∫c bn tu·ªïi m·ªõi lu√¥n xinh ƒë·∫πp, y√™u ƒë·ªùi v√† t√≠ch c·ª±c nh√©!</p>
                <p>:>> may l√∫c n√£y m·ªõi c√≥ ·∫£nh b ƒë·ªÉ ho√†n thi·ªán file n√†y üòá m√† ·∫£nh ƒë·∫πp nha <3 </p>
                <p>p/s: C√≥ th·ªÉ file n√†y tui l√†m h∆°i g·∫•p n√™n ko th·ªÉ tr∆°n tru ƒë∆∞·ª£c 100% ƒë∆∞·ª£c, b th√¥ng c·∫£m nha üåπ</p>
                <p>‚ù§Ô∏è</p>
                <p style="font-size: 0.6em">T·ª´: p.a.n.d.a -  ï‚Ä¢·¥•‚Ä¢ î</p>
            </div>
        </div>

        <div id="flower-container"></div>

        <div id="final-message-container">
            <div id="final-message"><h1>..Happy Birthday ‚ù§Ô∏è</h1></div>
        </div>

    </div> <!-- K·∫øt th√∫c main-wrapper -->

    <script>
        const startScreen = document.getElementById('start-screen');
        const startButton = document.getElementById('start-button');
        const countdownScreen = document.getElementById('countdown-screen');
        const countdownNumber = document.getElementById('countdown-number');
        const music = document.getElementById('background-music');
        const mainWrapper = document.getElementById('main-wrapper');

        // === 1. X·ª¨ L√ù N√öT B·∫§M V√Ä ƒê·∫æM NG∆Ø·ª¢C ===
        startButton.addEventListener('click', () => {
            // ·∫®n n√∫t b·∫•m
            startScreen.style.opacity = '0';
            setTimeout(() => { startScreen.style.display = 'none'; }, 500);

            // Hi·ªán m√†n h√¨nh ƒë·∫øm ng∆∞·ª£c
            countdownScreen.style.display = 'flex';
            music.play().catch(e => console.log("C·∫ßn t∆∞∆°ng t√°c ƒë·ªÉ ph√°t nh·∫°c")); // Ph√°t nh·∫°c ngay

            let count = 5;
            const countInterval = setInterval(() => {
                count--;
                if (count > 0) {
                    countdownNumber.innerText = count;
                } else {
                    clearInterval(countInterval);
                    // K·∫øt th√∫c ƒë·∫øm ng∆∞·ª£c -> V√†o n·ªôi dung ch√≠nh
                    countdownScreen.style.display = 'none';
                    runVisualTimeline();
                }
            }, 1000);
        });

        // === 2. HI·ªÜU ·ª®NG MATRIX (T·ªêI ∆ØU CHO WRAPPER) ===
        const canvas = document.getElementById('matrix-canvas');
        const ctx = canvas.getContext('2d');

        // H√†m set k√≠ch th∆∞·ªõc canvas theo k√≠ch th∆∞·ªõc c·ªßa wrapper (ƒë·ªÉ h·ªó tr·ª£ xoay)
        function resizeCanvas() {
            canvas.width = mainWrapper.offsetWidth;
            canvas.height = mainWrapper.offsetHeight;
        }
        // G·ªçi resize ngay v√† khi ƒë·ªïi k√≠ch th∆∞·ªõc
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        const characters = '‚ù§';
        const fontSize = 20;
        let columns = Math.floor(canvas.width / fontSize);
        let drops = [];
        
        function initMatrix() {
            columns = Math.floor(canvas.width / fontSize);
            drops = Array(columns).fill(1);
        }
        initMatrix();

        function drawMatrix() {
            ctx.fillStyle = 'rgba(255, 221, 225, 0.15)'; // N·ªÅn m·ªù h∆°n ch√∫t
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            ctx.fillStyle = '#ff5e99'; // M√†u ch·ªØ ƒë·∫≠m h∆°n ch√∫t
            ctx.font = `${fontSize}px Arial`;
            
            for (let i = 0; i < drops.length; i++) {
                const text = characters;
                ctx.fillText(text, i * fontSize, drops[i] * fontSize);
                
                if (drops[i] * fontSize > canvas.height && Math.random() > 0.98) {
                    drops[i] = 0;
                }
                drops[i]++;
            }
        }

        // === 3. HI·ªÜU ·ª®NG HOA V√Ä ·∫¢NH N·ªîI L√äN ===
        const flowerContainer = document.getElementById('flower-container');
        const flowers = ['üå∏', 'üå∫', 'üå∑', 'üåª', 'üåº', 'üåπ', 'üíê']; 
        const imageUrl = 'anh_nenn.jpg'; // Link ·∫£nh c·ªßa b·∫°n

        function createFloatingElement() {
            const el = document.createElement('div');
            // Random: 70% l√† hoa, 30% l√† ·∫£nh
            const isImage = Math.random() > 0.7; 

            if (isImage) {
                el.classList.add('floating-item', 'heart-image-item');
                el.style.backgroundImage = `url('${imageUrl}')`;
            } else {
                el.classList.add('floating-item', 'flower-item');
                el.innerText = flowers[Math.floor(Math.random() * flowers.length)];
            }

            // Random v·ªã tr√≠ xu·∫•t ph√°t (theo chi·ªÅu r·ªông c·ªßa wrapper)
            el.style.left = `${Math.random() * 100}%`;
            
            // Random c√°c th√¥ng s·ªë animation ƒë·ªÉ t·ª± nhi√™n h∆°n
            const duration = Math.random() * 3 + 4; // 4s -> 7s
            el.style.animationDuration = `${duration}s`;
            el.style.animationDelay = '0s';
            
            flowerContainer.appendChild(el);

            // X√≥a sau khi bay xong
            setTimeout(() => el.remove(), duration * 1000);
        }

        // === 4. K·ªäCH B·∫¢N CH·∫†Y CH∆Ø∆†NG TR√åNH ===
        function runVisualTimeline() {
            // Ch·∫°y Matrix
            const matrixInterval = setInterval(drawMatrix, 50);

            const messages = document.querySelectorAll('.message-box p');
            const messageBox = document.querySelector('.message-box');
            const finalMessageContainer = document.getElementById('final-message-container');
            
            let currentTime = 0;
            const timePerLine = 2500; // Th·ªùi gian ƒë·ªçc m·ªói d√≤ng (tƒÉng l√™n cho d·ªÖ ƒë·ªçc)

            // Hi·ªán t·ª´ng d√≤ng ch·ªØ (ch·ªâ hi·ªán 1 d√≤ng t·∫°i 1 th·ªùi ƒëi·ªÉm ƒë·ªÉ ƒë·ª° r·ªëi tr√™n ƒët)
            messages.forEach((p, index) => {
                setTimeout(() => {
                    // ·∫®n d√≤ng tr∆∞·ªõc ƒë√≥ (n·∫øu c√≥ v√† kh√¥ng ph·∫£i l√† d√≤ng cu·ªëi c√πng c·ªßa cre)
                    if(index > 0) {
                        messages[index-1].style.display = 'none';
                        messages[index-1].classList.remove('visible');
                    }
                    // N·∫øu l√† d√≤ng Cre cu·ªëi c√πng th√¨ gi·ªØ l·∫°i d√≤ng tr√°i tim
                    if (index === messages.length - 1) {
                         messages[index-1].style.display = 'block'; // Gi·ªØ l·∫°i tr√°i tim
                         messages[index-1].classList.add('visible');
                    }

                    p.classList.add('visible');
                }, currentTime);
                currentTime += timePerLine;
            });

            // T·ªïng th·ªùi gian ch·ªù h·∫øt ch·ªØ
            const totalTextTime = currentTime + 2000;

            // Sau khi h·∫øt ch·ªØ: M·ªù matrix + ·∫®n box ch·ªØ
            setTimeout(() => {
                messageBox.classList.add('fade-out');
                canvas.classList.add('fade-out');
                setTimeout(() => clearInterval(matrixInterval), 2000); // D·ª´ng v·∫Ω matrix
            }, totalTextTime);

            // B·∫Øt ƒë·∫ßu m∆∞a hoa v√† ·∫£nh (b·∫Øt ƒë·∫ßu s·ªõm h∆°n 1 x√≠u khi ch·ªØ ƒëang m·ªù)
            setTimeout(() => {
                // T·∫°o li√™n t·ª•c
                const flowerInterval = setInterval(createFloatingElement, 300); 
                
                // D·ª´ng t·∫°o sau 15 gi√¢y (ho·∫∑c ƒë·ªÉ ch·∫°y m√£i n·∫øu mu·ªën)
                // setTimeout(() => clearInterval(flowerInterval), 15000); 
            }, totalTextTime - 1000);

            // Hi·ªán l·ªùi ch√∫c cu·ªëi c√πng
            setTimeout(() => {
                finalMessageContainer.style.opacity = '1';
            }, totalTextTime + 1000);
        }
    </script>
</body>
</html>

